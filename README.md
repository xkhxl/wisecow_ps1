# Wisecow Application

A Kubernetes-deployed web server serving cow wisdom messages. This project demonstrates containerization, Kubernetes deployment, secure TLS communication, and CI/CD automation.

## Project Overview
The Wisecow application is a simple web server displaying random cow wisdom messages using `cowsay` and `fortune-mod`.  
This project containerizes the application, deploys it on a Kubernetes cluster (Minikube), and exposes it securely over HTTPS using an NGINX Ingress.

## Prerequisites
- Docker
- Minikube
- kubectl
- `fortune-mod` and `cowsay` (for local execution):
sudo apt install fortune-mod cowsay -y

## Dockerization
The application is packaged as a Docker image using the provided Dockerfile.  

Build and run locally:
docker build -t wisecow:latest .
docker run -p 4499:4499 wisecow:latest

## Kubernetes Deployment
Kubernetes manifests are provided in the k8s/ folder:
- wisecow-deployment.yaml – Deployment of Wisecow app
- wisecow-service.yaml – Exposes the app as a NodePort service
- wisecow-ingress.yaml – Configures an NGINX Ingress with TLS

Apply manifests:
kubectl apply -f k8s/wisecow-deployment.yaml
kubectl apply -f k8s/wisecow-service.yaml
kubectl apply -f k8s/wisecow-ingress.yaml

## TLS Setup
TLS certificates are stored in k8s/certs/:
- tls.crt – Certificate
- tls.key – Private key

The Ingress is configured to terminate HTTPS traffic, enabling secure access at:
https://wisecow.local

Note: When using Minikube, run the tunnel to expose the service on privileged ports:
sudo --preserve-env=HOME minikube tunnel

Update your /etc/hosts to point to Minikube IP:
echo "$(minikube ip) wisecow.local" | sudo tee -a /etc/hosts

## Continuous Integration / Deployment (CI/CD)
A GitHub Actions workflow is configured in .github/workflows/docker-build.yml:
- Builds a new Docker image on every push to main
- Pushes the image to Docker Hub
- Deploys changes to the Kubernetes cluster automatically

Secrets required in GitHub:
- DOCKER_USERNAME – Docker Hub username
- DOCKER_PASSWORD – Docker Hub password
- KUBECONFIG – Base64-encoded kubeconfig for your Minikube or remote cluster

## Accessing the Application
After deployment and tunnel setup, access the app via:
curl -k https://wisecow.local

You should see a random cow wisdom message generated by cowsay and fortune-mod.
